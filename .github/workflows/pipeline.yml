name: Demonstracao de Variaveis de Ambiente

on:
  push:
    branches:
      - main
  workflow_dispatch:

# Variaveis de ambiente no nivel de workflow
env:
  WORKFLOW_VAR: "Variavel definida no nivel de workflow"
  AMBIENTE: "Producao"
  VERSAO_APP: "1.0.0"

jobs:
  demonstracao-variaveis:
    name: Job de Demonstracao de Variaveis
    runs-on: ubuntu-latest

    # Variaveis de ambiente no nivel de job
    env:
      JOB_VAR: "Variavel definida no nivel de job"
      USUARIO: "devops_user"

    steps:
      - name: Exibir variaveis do workflow
        run: |
          echo "=== Variaveis do workflow ==="
          echo "WORKFLOW_VAR: ${{ env.WORKFLOW_VAR }}"
          echo "AMBIENTE: ${{ env.AMBIENTE }}"
          echo "VERSAO_APP: ${{ env.VERSAO_APP }}"

      - name: Exibir variaveis do job
        run: |
          echo "=== Variaveis do job ==="
          echo "JOB_VAR: ${{ env.JOB_VAR }}"
          echo "USUARIO: ${{ env.USUARIO }}"

      - name: Exibir variaveis do step
        env:
          STEP_VAR: "Variavel definida no nivel de step"
          MENSAGEM: "Este e um exemplo pratico"
        run: |
          echo "=== Variaveis do step ==="
          echo "STEP_VAR: ${{ env.STEP_VAR }}"
          echo "MENSAGEM: ${{ env.MENSAGEM }}"

      - name: Combinar variaveis de diferentes niveis
        env:
          STEP_SPECIFICO: "step-value"
        run: |
          echo "=== Combinacao de variaveis ==="
          echo "Workflow Var: ${{ env.WORKFLOW_VAR }}"
          echo "Job Var: ${{ env.JOB_VAR }}"
          echo "Step Var: ${{ env.STEP_SPECIFICO }}"
          echo "Todas acessiveis no mesmo contexto!"
