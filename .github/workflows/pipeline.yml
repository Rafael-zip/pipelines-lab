name: "Workflow Agendado - Relatório Diário"

on:
  schedule:
    # Executa todos os dias às 00:55 UTC
    - cron: '55 00 * * *'
  workflow_dispatch:

jobs:
  schedule-job:
    name: "Job Agendado"
    runs-on: ubuntu-latest

    steps:
      - name: Checkout codigo
        uses: actions/checkout@v4

      - name: Informacoes do Schedule
        run: |
          echo "Workflow disparado por Schedule"
          echo "Data local: $(date)"
          echo "Hora UTC: $(date -u)"
          echo "Timezone: $(date +%Z)"

      - name: Relatorio diario automatizado
        run: |
          echo "RELATORIO DIARIO AUTOMATIZADO"
          echo "=============================="
          echo "Total de commits: $(git rev-list --count HEAD)"
          echo "Contribuidores unicos: $(git shortlog -s --all | wc -l)"
          echo "Ultimo commit:"
          git log -1 --pretty=format:'%h - %an, %ar : %s'
