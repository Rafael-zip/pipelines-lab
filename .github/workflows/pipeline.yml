name: Jobs Paralelos

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  code-analysis:
    name: Analise de Codigo
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Analise de sintaxe
        run: |
          echo "Analisando sintaxe do codigo..."
          sleep 3
          echo "Analise de sintaxe concluida."

      - name: Verificar padroes de codigo
        run: |
          echo "Verificando padroes de codigo..."
          sleep 2
          echo "Padroes verificados."

      - name: Gerar relatorio de analise
        run: |
          echo "Relatorio de analise gerado em $(date)" > analysis-report.txt
          echo "Relatorio salvo."

  unit-tests:
    name: Testes Unitarios
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Configurar ambiente de testes
        run: |
          echo "Configurando ambiente de testes..."
          sleep 2
          echo "Ambiente configurado."

      - name: Executar testes unitarios
        run: |
          echo "Executando testes unitarios..."
          sleep 4
          echo "Todos os testes unitarios passaram (15/15)."

      - name: Gerar relatorio de cobertura
        run: |
          echo "Cobertura: 85%" > coverage.txt
          echo "Relatorio de cobertura gerado."

  build:
    name: Build da Aplicacao
    runs-on: ubuntu-latest

    steps:
      - name: Checkout codigo
        uses: actions/checkout@v4

      - name: Configurar ambiente de build
        run: |
          echo "Configurando ambiente de build..."
          sleep 2
          echo "Ambiente de build configurado."

      - name: Compilar aplicacao
        run: |
          echo "Compilando aplicacao..."
          sleep 5
          echo "Build concluido com sucesso."

      - name: Gerar artefatos
        run: |
          mkdir -p build
          echo "Aplicacao compilada em $(date)" > build/app.jar
          echo "Artefatos gerados."

      - name: Upload artefatos
        uses: actions/upload-artifact@v4
        with:
          name: build-artifacts
          path: build/
